<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 16 Dataframe wrangling | R Training</title>
  <meta name="description" content="A resource &amp; workbook for learning R" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 16 Dataframe wrangling | R Training" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A resource &amp; workbook for learning R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 16 Dataframe wrangling | R Training" />
  
  <meta name="twitter:description" content="A resource &amp; workbook for learning R" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ggplot.html"/>
<link rel="next" href="rms-titanic.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to the course!</a></li>
<li class="part"><span><b>I Pre-Training Material</b></span></li>
<li class="chapter" data-level="2" data-path="setting-up-your-computer.html"><a href="setting-up-your-computer.html"><i class="fa fa-check"></i><b>2</b> Setting up your computer</a>
<ul>
<li class="chapter" data-level="" data-path="setting-up-your-computer.html"><a href="setting-up-your-computer.html#install-r"><i class="fa fa-check"></i>Install R</a></li>
<li class="chapter" data-level="" data-path="setting-up-your-computer.html"><a href="setting-up-your-computer.html#install-rstudio"><i class="fa fa-check"></i>Install RStudio</a></li>
<li class="chapter" data-level="" data-path="setting-up-your-computer.html"><a href="setting-up-your-computer.html#install-packages"><i class="fa fa-check"></i>Install packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html"><i class="fa fa-check"></i><b>3</b> Preparing for the R Training</a>
<ul>
<li class="chapter" data-level="3.1" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html#running-r-code-in-the-console"><i class="fa fa-check"></i><b>3.1</b> Running R code in the <em>Console</em></a></li>
<li class="chapter" data-level="" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html#r-as-a-calculator"><i class="fa fa-check"></i>R as a calculator</a></li>
<li class="chapter" data-level="" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html#re-running-code"><i class="fa fa-check"></i>Re-running code</a></li>
<li class="chapter" data-level="" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html#incomplete-commands"><i class="fa fa-check"></i>Incomplete commands</a></li>
<li class="chapter" data-level="" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html#getting-errors"><i class="fa fa-check"></i>Getting errors</a></li>
<li class="chapter" data-level="" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html#using-parentheses"><i class="fa fa-check"></i>Using parentheses</a></li>
<li class="chapter" data-level="" data-path="preparing-for-the-r-training.html"><a href="preparing-for-the-r-training.html#use-built-in-r-functions"><i class="fa fa-check"></i>Use built-in R functions</a></li>
</ul></li>
<li class="part"><span><b>II Getting Started</b></span></li>
<li class="chapter" data-level="4" data-path="welcome.html"><a href="welcome.html"><i class="fa fa-check"></i><b>4</b> Welcome!</a>
<ul>
<li class="chapter" data-level="" data-path="welcome.html"><a href="welcome.html#what-this-is-and-what-it-isnt"><i class="fa fa-check"></i>What this is, and what it isn’t</a></li>
<li class="chapter" data-level="" data-path="welcome.html"><a href="welcome.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a></li>
<li class="chapter" data-level="" data-path="welcome.html"><a href="welcome.html#where-did-this-come-from"><i class="fa fa-check"></i>Where did this come from</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html"><i class="fa fa-check"></i><b>5</b> Using <code>RStudio</code> &amp; <code>R</code> scripts</a>
<ul>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#r-and-rstudio-whats-the-difference"><i class="fa fa-check"></i><code>R</code> and <code>RStudio</code>: what’s the difference?</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#two-minute-tour-of-rstudio"><i class="fa fa-check"></i>Two-minute tour of <code>RStudio</code></a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#scripts"><i class="fa fa-check"></i>Scripts</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#wd"><i class="fa fa-check"></i>Your working directory</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#typical-workflows"><i class="fa fa-check"></i>Typical workflows</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="review-your-r-training-prep.html"><a href="review-your-r-training-prep.html"><i class="fa fa-check"></i><b>6</b> Review your R Training Prep</a></li>
<li class="chapter" data-level="7" data-path="variables.html"><a href="variables.html"><i class="fa fa-check"></i><b>7</b> Variables</a>
<ul>
<li class="chapter" data-level="" data-path="variables.html"><a href="variables.html#introducing-variables"><i class="fa fa-check"></i>Introducing variables</a></li>
<li class="chapter" data-level="" data-path="variables.html"><a href="variables.html#types-of-data-in-r"><i class="fa fa-check"></i>Types of data in <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>8</b> Vectors</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#declaring-and-using-vectors"><i class="fa fa-check"></i>Declaring and using vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#math-with-two-vectors"><i class="fa fa-check"></i>Math with two vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#functions-for-handling-vectors"><i class="fa fa-check"></i>Functions for handling vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#subsetting-vectors"><i class="fa fa-check"></i>Subsetting vectors</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="calling_functions.html"><a href="calling_functions.html"><i class="fa fa-check"></i><b>9</b> Calling functions</a></li>
<li class="chapter" data-level="10" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html"><i class="fa fa-check"></i><b>10</b> Subsetting &amp; filtering</a>
<ul>
<li class="chapter" data-level="" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html#subsetting-with-indices"><i class="fa fa-check"></i>Subsetting with indices</a></li>
<li class="chapter" data-level="" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html#subsetting-with-booleans"><i class="fa fa-check"></i>Subsetting with booleans</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>11</b> Dataframes</a>
<ul>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#subsetting-exploring-dataframes"><i class="fa fa-check"></i>Subsetting &amp; exploring dataframes</a></li>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#creating-dataframes"><i class="fa fa-check"></i>Creating dataframes</a></li>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#modifying-dataframes"><i class="fa fa-check"></i>Modifying dataframes</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>12</b> Packages</a>
<ul>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#packages-you-already-have"><i class="fa fa-check"></i>Packages you already have</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#installing-a-new-package"><i class="fa fa-check"></i>Installing a new package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#loading-an-installed-package"><i class="fa fa-check"></i>Loading an installed package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#calling-functions-from-a-package"><i class="fa fa-check"></i>Calling functions from a package</a></li>
</ul></li>
<li class="part"><span><b>III Basic <code>R</code> workflow</b></span></li>
<li class="chapter" data-level="13" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>13</b> Importing data</a>
<ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-in-data"><i class="fa fa-check"></i>Reading in data</a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#csv-files"><i class="fa fa-check"></i><code>.csv</code> files</a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#prepping-your-data-for-r"><i class="fa fa-check"></i>Prepping your data for <code>R</code></a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#managing-files-folders"><i class="fa fa-check"></i>Managing files &amp; folders</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="base-plots.html"><a href="base-plots.html"><i class="fa fa-check"></i><b>14</b> Base plots</a>
<ul>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#create-a-basic-plot"><i class="fa fa-check"></i>Create a basic plot</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#most-common-types-of-plots"><i class="fa fa-check"></i>Most common types of plots</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#basic-plot-formatting"><i class="fa fa-check"></i>Basic plot formatting</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#plotting-with-data-frames"><i class="fa fa-check"></i>Plotting with data frames</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>15</b> <code>ggplot</code></a>
<ul>
<li class="chapter" data-level="" data-path="ggplot.html"><a href="ggplot.html#what-is-ggplot2"><i class="fa fa-check"></i>What is <code>ggplot2</code>?</a></li>
<li class="chapter" data-level="" data-path="ggplot.html"><a href="ggplot.html#bar-plot"><i class="fa fa-check"></i>Bar plot</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>16</b> Dataframe wrangling</a>
<ul>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#the-dplyr-package"><i class="fa fa-check"></i>The <code>dplyr</code> package</a></li>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#the-pipe"><i class="fa fa-check"></i>The <code>%&gt;%</code> pipe</a></li>
<li class="chapter" data-level="" data-path="dplyr.html"><a href="dplyr.html#dplyr-verbs"><i class="fa fa-check"></i><code>dplyr</code> verbs</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="rms-titanic.html"><a href="rms-titanic.html"><i class="fa fa-check"></i><b>17</b> <em>RMS Titanic</em></a></li>
<li class="chapter" data-level="18" data-path="a-dplyr-survey.html"><a href="a-dplyr-survey.html"><i class="fa fa-check"></i><b>18</b> A <code>dplyr</code> survey</a></li>
<li class="chapter" data-level="19" data-path="global-health-ggplot.html"><a href="global-health-ggplot.html"><i class="fa fa-check"></i><b>19</b> Global health &amp; <code>ggplot</code></a></li>
<li class="chapter" data-level="20" data-path="brazzavilles-climate.html"><a href="brazzavilles-climate.html"><i class="fa fa-check"></i><b>20</b> Brazzaville’s climate</a></li>
<li class="chapter" data-level="21" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html"><i class="fa fa-check"></i><b>21</b> Cleaning messy data</a></li>
<li class="part"><span><b>IV Extra Information</b></span></li>
<li class="chapter" data-level="22" data-path="dates.html"><a href="dates.html"><i class="fa fa-check"></i><b>22</b> Working with dates &amp; times</a>
<ul>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#the-lubridate-package"><i class="fa fa-check"></i>The <code>lubridate()</code> package</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#common-tasks"><i class="fa fa-check"></i>Common tasks</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>23</b> Working with text</a>
<ul>
<li class="chapter" data-level="" data-path="text.html"><a href="text.html#most-common-tools"><i class="fa fa-check"></i>Most common tools</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr" class="section level1 hasAnchor" number="16">
<h1><span class="header-section-number">Module 16</span> Dataframe wrangling<a href="dplyr.html#dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="learning-goals-11" class="section level4 unnumbered hasAnchor">
<h4>Learning goals<a href="dplyr.html#learning-goals-11" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Understand the importance of <em>tidy</em> dataframes</li>
<li>Understand what the <code>tidyverse</code> is and why it is awesome</li>
<li>Feel comfortable working with dataframes using <code>dplyr</code> functions.</li>
</ul>
</div>
<div id="the-dplyr-package" class="section level2 unnumbered hasAnchor">
<h2>The <code>dplyr</code> package<a href="dplyr.html#the-dplyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data scientists largely work in data frames and <em>do things</em> to data. This is what the package <code>dplyr</code> is optimized for. It consists of a series of “verbs” which cover 95% of what you need to do for most basic data processing tasks.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="dplyr.html#cb240-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;dplyr&#39;</span>) <span class="co"># if you haven&#39;t yet</span></span></code></pre></div>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="dplyr.html#cb241-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>The <code>dplyr</code> package contains a set of <code>verbs</code>: things you do to dataframes. Those verbs are:</p>
<ul>
<li><strong><code>filter()</code></strong><br />
</li>
<li><strong><code>arrange()</code></strong><br />
</li>
<li><strong><code>select()</code></strong><br />
</li>
<li><strong><code>rename()</code></strong><br />
</li>
<li><strong><code>distinct()</code></strong><br />
</li>
<li><strong><code>mutate()</code></strong><br />
</li>
<li><strong><code>summarise()</code></strong></li>
</ul>
</div>
<div id="the-pipe" class="section level2 unnumbered hasAnchor">
<h2>The <code>%&gt;%</code> pipe<a href="dplyr.html#the-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong><code>%&gt;%</code></strong> is a “pipe”. It is a way to write code without so many parentheses. For example, what if I want to find the square root of the sum of the first six elements of a sequence of 10 to 20 by 2?</p>
<p>Here’s what that command would look like in base <code>R</code>:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="dplyr.html#cb242-1" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="fu">head</span>(<span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">2</span>))))</span>
<span id="cb242-2"><a href="dplyr.html#cb242-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">9.486833</span></span></code></pre></div>
<p>Pretty overwhelming, and pretty easy to make errors in writing it out.</p>
<p>But the above could also be written a simpler way:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="dplyr.html#cb243-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">2</span>) <span class="sc">%&gt;%</span> head <span class="sc">%&gt;%</span> sum <span class="sc">%&gt;%</span> sqrt</span>
<span id="cb243-2"><a href="dplyr.html#cb243-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">9.486833</span></span></code></pre></div>
<p>When you see the <strong><code>%&gt;%</code></strong> pipe symbol, think of the word <strong>“then”</strong>.</p>
<p>The above code could be read aloud like so: “First, get a sequence of every second number between 10 and 20. <strong>Then</strong>, take the first six values. <strong>Then</strong>, sum those samples together. <strong>Then</strong>, take the square root of that sum.”</p>
<p>Using the <code>%&gt;%</code> pipe framework, your code turns from a nonlinear series of parentheses and brackets to a linear progression of steps, which is a closer fit to how we tend to think about working with data. Instead of working from the inside of a command outward, we thinking linearly: take the data, <strong>then</strong> do things with it, <strong>then</strong> do more things with it, etc.</p>
<p>Here’s another example:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="dplyr.html#cb244-1" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">sd</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>))</span>
<span id="cb244-2"><a href="dplyr.html#cb244-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">29.01149</span></span></code></pre></div>
<p>… could also be written as:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="dplyr.html#cb245-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">%&gt;%</span> sd <span class="sc">%&gt;%</span> mean</span>
<span id="cb245-2"><a href="dplyr.html#cb245-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">29.01149</span></span></code></pre></div>
</div>
<div id="dplyr-verbs" class="section level2 unnumbered hasAnchor">
<h2><code>dplyr</code> verbs<a href="dplyr.html#dplyr-verbs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To practice the <code>dplyr</code> verbs, let’s make a small dataframe named <code>people</code>:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="dplyr.html#cb246-1" tabindex="-1"></a>people <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">who =</span> <span class="fu">c</span>(<span class="st">&#39;Joe&#39;</span>, <span class="st">&#39;Ben&#39;</span>, <span class="st">&#39;Xing&#39;</span>, <span class="st">&#39;Coloma&#39;</span>),</span>
<span id="cb246-2"><a href="dplyr.html#cb246-2" tabindex="-1"></a>                    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&#39;Male&#39;</span>, <span class="st">&#39;Male&#39;</span>, <span class="st">&#39;Female&#39;</span>, <span class="st">&#39;Female&#39;</span>),</span>
<span id="cb246-3"><a href="dplyr.html#cb246-3" tabindex="-1"></a>                    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">33</span>, <span class="dv">32</span>, <span class="dv">34</span>))</span>
<span id="cb246-4"><a href="dplyr.html#cb246-4" tabindex="-1"></a>people</span>
<span id="cb246-5"><a href="dplyr.html#cb246-5" tabindex="-1"></a>     who    sex age</span>
<span id="cb246-6"><a href="dplyr.html#cb246-6" tabindex="-1"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb246-7"><a href="dplyr.html#cb246-7" tabindex="-1"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb246-8"><a href="dplyr.html#cb246-8" tabindex="-1"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb246-9"><a href="dplyr.html#cb246-9" tabindex="-1"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span></span></code></pre></div>
<div id="filter" class="section level3 unnumbered hasAnchor">
<h3><code>filter()</code><a href="dplyr.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>filter()</code> function is used to subset a dataframe, retaining all rows that satisfy your conditions. To be retained, the row must produce a value of <code>TRUE</code> for all conditions.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="dplyr.html#cb247-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&#39;Male&#39;</span>)</span>
<span id="cb247-2"><a href="dplyr.html#cb247-2" tabindex="-1"></a>  who  sex age</span>
<span id="cb247-3"><a href="dplyr.html#cb247-3" tabindex="-1"></a><span class="dv">1</span> Joe Male  <span class="dv">35</span></span>
<span id="cb247-4"><a href="dplyr.html#cb247-4" tabindex="-1"></a><span class="dv">2</span> Ben Male  <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="dplyr.html#cb248-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&#39;Female&#39;</span>)</span>
<span id="cb248-2"><a href="dplyr.html#cb248-2" tabindex="-1"></a>     who    sex age</span>
<span id="cb248-3"><a href="dplyr.html#cb248-3" tabindex="-1"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb248-4"><a href="dplyr.html#cb248-4" tabindex="-1"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span></code></pre></div>
<p>You can also filter according to multiple conditions. Here are three ways to acheive the same thing:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="dplyr.html#cb249-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&#39;Female&#39;</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">33</span>)</span>
<span id="cb249-2"><a href="dplyr.html#cb249-2" tabindex="-1"></a>   who    sex age</span>
<span id="cb249-3"><a href="dplyr.html#cb249-3" tabindex="-1"></a><span class="dv">1</span> Xing Female  <span class="dv">32</span></span></code></pre></div>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="dplyr.html#cb250-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&#39;Female&#39;</span>, age <span class="sc">&lt;</span> <span class="dv">33</span>)</span>
<span id="cb250-2"><a href="dplyr.html#cb250-2" tabindex="-1"></a>   who    sex age</span>
<span id="cb250-3"><a href="dplyr.html#cb250-3" tabindex="-1"></a><span class="dv">1</span> Xing Female  <span class="dv">32</span></span></code></pre></div>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="dplyr.html#cb251-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&#39;Female&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">33</span>)</span>
<span id="cb251-2"><a href="dplyr.html#cb251-2" tabindex="-1"></a>   who    sex age</span>
<span id="cb251-3"><a href="dplyr.html#cb251-3" tabindex="-1"></a><span class="dv">1</span> Xing Female  <span class="dv">32</span></span></code></pre></div>
<p>Note that when a condition evaluates to <code>NA</code>, its row will be dropped. This differ from the base subsetting works with <code>[ ... ]</code>.</p>
</div>
<div id="arrange" class="section level3 unnumbered hasAnchor">
<h3><code>arrange()</code><a href="dplyr.html#arrange" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Arrange means putting things in order. That is, <code>arrange()</code> orders the rows of a data frame by the values of selected columns.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="dplyr.html#cb252-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(age)</span>
<span id="cb252-2"><a href="dplyr.html#cb252-2" tabindex="-1"></a>     who    sex age</span>
<span id="cb252-3"><a href="dplyr.html#cb252-3" tabindex="-1"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb252-4"><a href="dplyr.html#cb252-4" tabindex="-1"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb252-5"><a href="dplyr.html#cb252-5" tabindex="-1"></a><span class="dv">3</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb252-6"><a href="dplyr.html#cb252-6" tabindex="-1"></a><span class="dv">4</span>    Joe   Male  <span class="dv">35</span></span></code></pre></div>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="dplyr.html#cb253-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(sex)</span>
<span id="cb253-2"><a href="dplyr.html#cb253-2" tabindex="-1"></a>     who    sex age</span>
<span id="cb253-3"><a href="dplyr.html#cb253-3" tabindex="-1"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb253-4"><a href="dplyr.html#cb253-4" tabindex="-1"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb253-5"><a href="dplyr.html#cb253-5" tabindex="-1"></a><span class="dv">3</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb253-6"><a href="dplyr.html#cb253-6" tabindex="-1"></a><span class="dv">4</span>    Ben   Male  <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="dplyr.html#cb254-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(who)</span>
<span id="cb254-2"><a href="dplyr.html#cb254-2" tabindex="-1"></a>     who    sex age</span>
<span id="cb254-3"><a href="dplyr.html#cb254-3" tabindex="-1"></a><span class="dv">1</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb254-4"><a href="dplyr.html#cb254-4" tabindex="-1"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb254-5"><a href="dplyr.html#cb254-5" tabindex="-1"></a><span class="dv">3</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb254-6"><a href="dplyr.html#cb254-6" tabindex="-1"></a><span class="dv">4</span>   Xing Female  <span class="dv">32</span></span></code></pre></div>
<p>To reverse the order, use <code>desc()</code>:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="dplyr.html#cb255-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(age))</span>
<span id="cb255-2"><a href="dplyr.html#cb255-2" tabindex="-1"></a>     who    sex age</span>
<span id="cb255-3"><a href="dplyr.html#cb255-3" tabindex="-1"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb255-4"><a href="dplyr.html#cb255-4" tabindex="-1"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb255-5"><a href="dplyr.html#cb255-5" tabindex="-1"></a><span class="dv">3</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb255-6"><a href="dplyr.html#cb255-6" tabindex="-1"></a><span class="dv">4</span>   Xing Female  <span class="dv">32</span></span></code></pre></div>
<p>You can also arrange by multiple levels:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="dplyr.html#cb256-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(sex, age)</span>
<span id="cb256-2"><a href="dplyr.html#cb256-2" tabindex="-1"></a>     who    sex age</span>
<span id="cb256-3"><a href="dplyr.html#cb256-3" tabindex="-1"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb256-4"><a href="dplyr.html#cb256-4" tabindex="-1"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb256-5"><a href="dplyr.html#cb256-5" tabindex="-1"></a><span class="dv">3</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb256-6"><a href="dplyr.html#cb256-6" tabindex="-1"></a><span class="dv">4</span>    Joe   Male  <span class="dv">35</span></span></code></pre></div>
</div>
<div id="select" class="section level3 unnumbered hasAnchor">
<h3><code>select()</code><a href="dplyr.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Select only certain variables in a data frame, making the dataframe skinnier (fewer columns).</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="dplyr.html#cb257-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">select</span>(age)</span>
<span id="cb257-2"><a href="dplyr.html#cb257-2" tabindex="-1"></a>  age</span>
<span id="cb257-3"><a href="dplyr.html#cb257-3" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">35</span></span>
<span id="cb257-4"><a href="dplyr.html#cb257-4" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">33</span></span>
<span id="cb257-5"><a href="dplyr.html#cb257-5" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">32</span></span>
<span id="cb257-6"><a href="dplyr.html#cb257-6" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">34</span></span></code></pre></div>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="dplyr.html#cb258-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">select</span>(sex, age)</span>
<span id="cb258-2"><a href="dplyr.html#cb258-2" tabindex="-1"></a>     sex age</span>
<span id="cb258-3"><a href="dplyr.html#cb258-3" tabindex="-1"></a><span class="dv">1</span>   Male  <span class="dv">35</span></span>
<span id="cb258-4"><a href="dplyr.html#cb258-4" tabindex="-1"></a><span class="dv">2</span>   Male  <span class="dv">33</span></span>
<span id="cb258-5"><a href="dplyr.html#cb258-5" tabindex="-1"></a><span class="dv">3</span> Female  <span class="dv">32</span></span>
<span id="cb258-6"><a href="dplyr.html#cb258-6" tabindex="-1"></a><span class="dv">4</span> Female  <span class="dv">34</span></span></code></pre></div>
<p>As you select columns, you can rename them like so:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="dplyr.html#cb259-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">select</span>(sex, <span class="at">years =</span> age)</span>
<span id="cb259-2"><a href="dplyr.html#cb259-2" tabindex="-1"></a>     sex years</span>
<span id="cb259-3"><a href="dplyr.html#cb259-3" tabindex="-1"></a><span class="dv">1</span>   Male    <span class="dv">35</span></span>
<span id="cb259-4"><a href="dplyr.html#cb259-4" tabindex="-1"></a><span class="dv">2</span>   Male    <span class="dv">33</span></span>
<span id="cb259-5"><a href="dplyr.html#cb259-5" tabindex="-1"></a><span class="dv">3</span> Female    <span class="dv">32</span></span>
<span id="cb259-6"><a href="dplyr.html#cb259-6" tabindex="-1"></a><span class="dv">4</span> Female    <span class="dv">34</span></span></code></pre></div>
<p>You can also select a set of columns using the <code>:</code> notation:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="dplyr.html#cb260-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">select</span>(who<span class="sc">:</span>sex)</span>
<span id="cb260-2"><a href="dplyr.html#cb260-2" tabindex="-1"></a>     who    sex</span>
<span id="cb260-3"><a href="dplyr.html#cb260-3" tabindex="-1"></a><span class="dv">1</span>    Joe   Male</span>
<span id="cb260-4"><a href="dplyr.html#cb260-4" tabindex="-1"></a><span class="dv">2</span>    Ben   Male</span>
<span id="cb260-5"><a href="dplyr.html#cb260-5" tabindex="-1"></a><span class="dv">3</span>   Xing Female</span>
<span id="cb260-6"><a href="dplyr.html#cb260-6" tabindex="-1"></a><span class="dv">4</span> Coloma Female</span></code></pre></div>
</div>
<div id="rename" class="section level3 unnumbered hasAnchor">
<h3><code>rename()</code><a href="dplyr.html#rename" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The function <code>rename()</code> changes the names of individual variables.</p>
<p>This verb takes the syntax <code>&lt;new_name&gt; = &lt;old_name&gt;</code> syntax.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="dplyr.html#cb261-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">gender =</span> sex, <span class="at">years =</span> age, <span class="at">first_name =</span> who)</span>
<span id="cb261-2"><a href="dplyr.html#cb261-2" tabindex="-1"></a>  first_name gender years</span>
<span id="cb261-3"><a href="dplyr.html#cb261-3" tabindex="-1"></a><span class="dv">1</span>        Joe   Male    <span class="dv">35</span></span>
<span id="cb261-4"><a href="dplyr.html#cb261-4" tabindex="-1"></a><span class="dv">2</span>        Ben   Male    <span class="dv">33</span></span>
<span id="cb261-5"><a href="dplyr.html#cb261-5" tabindex="-1"></a><span class="dv">3</span>       Xing Female    <span class="dv">32</span></span>
<span id="cb261-6"><a href="dplyr.html#cb261-6" tabindex="-1"></a><span class="dv">4</span>     Coloma Female    <span class="dv">34</span></span></code></pre></div>
</div>
<div id="mutate" class="section level3 unnumbered hasAnchor">
<h3><code>mutate()</code><a href="dplyr.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The function <code>mutate()</code> adds new variables and preserves existing ones.</p>
<p>New variables overwrite existing variables of the same name.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="dplyr.html#cb262-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">agein2020 =</span> age <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb262-2"><a href="dplyr.html#cb262-2" tabindex="-1"></a>     who    sex age agein2020</span>
<span id="cb262-3"><a href="dplyr.html#cb262-3" tabindex="-1"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>        <span class="dv">34</span></span>
<span id="cb262-4"><a href="dplyr.html#cb262-4" tabindex="-1"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>        <span class="dv">32</span></span>
<span id="cb262-5"><a href="dplyr.html#cb262-5" tabindex="-1"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>        <span class="dv">31</span></span>
<span id="cb262-6"><a href="dplyr.html#cb262-6" tabindex="-1"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>        <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="dplyr.html#cb263-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">is_male =</span> sex <span class="sc">==</span> <span class="st">&#39;Male&#39;</span>)</span>
<span id="cb263-2"><a href="dplyr.html#cb263-2" tabindex="-1"></a>     who    sex age is_male</span>
<span id="cb263-3"><a href="dplyr.html#cb263-3" tabindex="-1"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>    <span class="cn">TRUE</span></span>
<span id="cb263-4"><a href="dplyr.html#cb263-4" tabindex="-1"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>    <span class="cn">TRUE</span></span>
<span id="cb263-5"><a href="dplyr.html#cb263-5" tabindex="-1"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>   <span class="cn">FALSE</span></span>
<span id="cb263-6"><a href="dplyr.html#cb263-6" tabindex="-1"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>   <span class="cn">FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="dplyr.html#cb264-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">average_age =</span> <span class="fu">mean</span>(age))</span>
<span id="cb264-2"><a href="dplyr.html#cb264-2" tabindex="-1"></a>     who    sex age average_age</span>
<span id="cb264-3"><a href="dplyr.html#cb264-3" tabindex="-1"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>        <span class="fl">33.5</span></span>
<span id="cb264-4"><a href="dplyr.html#cb264-4" tabindex="-1"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>        <span class="fl">33.5</span></span>
<span id="cb264-5"><a href="dplyr.html#cb264-5" tabindex="-1"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>        <span class="fl">33.5</span></span>
<span id="cb264-6"><a href="dplyr.html#cb264-6" tabindex="-1"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>        <span class="fl">33.5</span></span></code></pre></div>
<p>You can call <code>mutate()</code> multiple times in the same pipe:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="dplyr.html#cb265-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">average_age =</span> <span class="fu">mean</span>(age)) <span class="sc">%&gt;%</span></span>
<span id="cb265-2"><a href="dplyr.html#cb265-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diff_from_avg =</span> age <span class="sc">-</span> average_age)</span>
<span id="cb265-3"><a href="dplyr.html#cb265-3" tabindex="-1"></a>     who    sex age average_age diff_from_avg</span>
<span id="cb265-4"><a href="dplyr.html#cb265-4" tabindex="-1"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>        <span class="fl">33.5</span>           <span class="fl">1.5</span></span>
<span id="cb265-5"><a href="dplyr.html#cb265-5" tabindex="-1"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>        <span class="fl">33.5</span>          <span class="sc">-</span><span class="fl">0.5</span></span>
<span id="cb265-6"><a href="dplyr.html#cb265-6" tabindex="-1"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>        <span class="fl">33.5</span>          <span class="sc">-</span><span class="fl">1.5</span></span>
<span id="cb265-7"><a href="dplyr.html#cb265-7" tabindex="-1"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>        <span class="fl">33.5</span>           <span class="fl">0.5</span></span></code></pre></div>
<p>You can also remove variables can be removed by setting their value to NULL.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="dplyr.html#cb266-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">age =</span> <span class="cn">NULL</span>)</span>
<span id="cb266-2"><a href="dplyr.html#cb266-2" tabindex="-1"></a>     who    sex</span>
<span id="cb266-3"><a href="dplyr.html#cb266-3" tabindex="-1"></a><span class="dv">1</span>    Joe   Male</span>
<span id="cb266-4"><a href="dplyr.html#cb266-4" tabindex="-1"></a><span class="dv">2</span>    Ben   Male</span>
<span id="cb266-5"><a href="dplyr.html#cb266-5" tabindex="-1"></a><span class="dv">3</span>   Xing Female</span>
<span id="cb266-6"><a href="dplyr.html#cb266-6" tabindex="-1"></a><span class="dv">4</span> Coloma Female</span></code></pre></div>
<p>A similar function, <code>transmute()</code>, adds new variables and drops existing ones, kind of like a combination of <code>select()</code> and <code>mutate()</code>.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="dplyr.html#cb267-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> <span class="fu">transmute</span>(<span class="at">average_age =</span> <span class="fu">mean</span>(age))</span>
<span id="cb267-2"><a href="dplyr.html#cb267-2" tabindex="-1"></a>  average_age</span>
<span id="cb267-3"><a href="dplyr.html#cb267-3" tabindex="-1"></a><span class="dv">1</span>        <span class="fl">33.5</span></span>
<span id="cb267-4"><a href="dplyr.html#cb267-4" tabindex="-1"></a><span class="dv">2</span>        <span class="fl">33.5</span></span>
<span id="cb267-5"><a href="dplyr.html#cb267-5" tabindex="-1"></a><span class="dv">3</span>        <span class="fl">33.5</span></span>
<span id="cb267-6"><a href="dplyr.html#cb267-6" tabindex="-1"></a><span class="dv">4</span>        <span class="fl">33.5</span></span></code></pre></div>
</div>
<div id="group_by" class="section level3 unnumbered hasAnchor">
<h3><code>group_by()</code><a href="dplyr.html#group_by" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Most data operations are done on groups defined by variables. The function <code>group_by()</code> takes an existing table and converts it into a grouped one where operations are performed “by group”.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="dplyr.html#cb268-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> </span>
<span id="cb268-2"><a href="dplyr.html#cb268-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb268-3"><a href="dplyr.html#cb268-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">average_age_for_sex =</span> <span class="fu">mean</span>(age)) </span>
<span id="cb268-4"><a href="dplyr.html#cb268-4" tabindex="-1"></a><span class="co"># A tibble: 4 × 4</span></span>
<span id="cb268-5"><a href="dplyr.html#cb268-5" tabindex="-1"></a><span class="co"># Groups:   sex [2]</span></span>
<span id="cb268-6"><a href="dplyr.html#cb268-6" tabindex="-1"></a>  who    sex      age average_age_for_sex</span>
<span id="cb268-7"><a href="dplyr.html#cb268-7" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>               <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb268-8"><a href="dplyr.html#cb268-8" tabindex="-1"></a><span class="dv">1</span> Joe    Male      <span class="dv">35</span>                  <span class="dv">34</span></span>
<span id="cb268-9"><a href="dplyr.html#cb268-9" tabindex="-1"></a><span class="dv">2</span> Ben    Male      <span class="dv">33</span>                  <span class="dv">34</span></span>
<span id="cb268-10"><a href="dplyr.html#cb268-10" tabindex="-1"></a><span class="dv">3</span> Xing   Female    <span class="dv">32</span>                  <span class="dv">33</span></span>
<span id="cb268-11"><a href="dplyr.html#cb268-11" tabindex="-1"></a><span class="dv">4</span> Coloma Female    <span class="dv">34</span>                  <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="dplyr.html#cb269-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> </span>
<span id="cb269-2"><a href="dplyr.html#cb269-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb269-3"><a href="dplyr.html#cb269-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">average_age_for_sex =</span> <span class="fu">mean</span>(age)) <span class="sc">%&gt;%</span></span>
<span id="cb269-4"><a href="dplyr.html#cb269-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diff_from_avg_for_sex =</span> age <span class="sc">-</span> average_age_for_sex)</span>
<span id="cb269-5"><a href="dplyr.html#cb269-5" tabindex="-1"></a><span class="co"># A tibble: 4 × 5</span></span>
<span id="cb269-6"><a href="dplyr.html#cb269-6" tabindex="-1"></a><span class="co"># Groups:   sex [2]</span></span>
<span id="cb269-7"><a href="dplyr.html#cb269-7" tabindex="-1"></a>  who    sex      age average_age_for_sex diff_from_avg_for_sex</span>
<span id="cb269-8"><a href="dplyr.html#cb269-8" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>               <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>                 <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb269-9"><a href="dplyr.html#cb269-9" tabindex="-1"></a><span class="dv">1</span> Joe    Male      <span class="dv">35</span>                  <span class="dv">34</span>                     <span class="dv">1</span></span>
<span id="cb269-10"><a href="dplyr.html#cb269-10" tabindex="-1"></a><span class="dv">2</span> Ben    Male      <span class="dv">33</span>                  <span class="dv">34</span>                    <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb269-11"><a href="dplyr.html#cb269-11" tabindex="-1"></a><span class="dv">3</span> Xing   Female    <span class="dv">32</span>                  <span class="dv">33</span>                    <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb269-12"><a href="dplyr.html#cb269-12" tabindex="-1"></a><span class="dv">4</span> Coloma Female    <span class="dv">34</span>                  <span class="dv">33</span>                     <span class="dv">1</span></span></code></pre></div>
<p>Note that a similar verb, <code>ungroup()</code>, removes grouping.</p>
</div>
<div id="summarize" class="section level3 unnumbered hasAnchor">
<h3><code>summarize()</code><a href="dplyr.html#summarize" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>summarize()</code> or <code>summarize()</code> creates an entirely new data frame. It will have one (or more) rows for each combination of grouping variables; if there are no grouping variables, the output will have a single row summarizing all observations in the input. It will contain one column for each grouping variable and one column for each of the summary statistics that you have specified.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="dplyr.html#cb270-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> </span>
<span id="cb270-2"><a href="dplyr.html#cb270-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">average_age =</span> <span class="fu">mean</span>(age))</span>
<span id="cb270-3"><a href="dplyr.html#cb270-3" tabindex="-1"></a>  average_age</span>
<span id="cb270-4"><a href="dplyr.html#cb270-4" tabindex="-1"></a><span class="dv">1</span>        <span class="fl">33.5</span></span></code></pre></div>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="dplyr.html#cb271-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> </span>
<span id="cb271-2"><a href="dplyr.html#cb271-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">average_age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb271-3"><a href="dplyr.html#cb271-3" tabindex="-1"></a>            <span class="at">standard_dev_of_age =</span> <span class="fu">sd</span>(age),</span>
<span id="cb271-4"><a href="dplyr.html#cb271-4" tabindex="-1"></a>            <span class="at">oldest_age =</span> <span class="fu">max</span>(age),</span>
<span id="cb271-5"><a href="dplyr.html#cb271-5" tabindex="-1"></a>            <span class="at">youngest_age =</span> <span class="fu">min</span>(age))</span>
<span id="cb271-6"><a href="dplyr.html#cb271-6" tabindex="-1"></a>  average_age standard_dev_of_age oldest_age youngest_age</span>
<span id="cb271-7"><a href="dplyr.html#cb271-7" tabindex="-1"></a><span class="dv">1</span>        <span class="fl">33.5</span>            <span class="fl">1.290994</span>         <span class="dv">35</span>           <span class="dv">32</span></span></code></pre></div>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="dplyr.html#cb272-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span> </span>
<span id="cb272-2"><a href="dplyr.html#cb272-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb272-3"><a href="dplyr.html#cb272-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb272-4"><a href="dplyr.html#cb272-4" tabindex="-1"></a>            <span class="at">oldest_age =</span> <span class="fu">max</span>(age),</span>
<span id="cb272-5"><a href="dplyr.html#cb272-5" tabindex="-1"></a>            <span class="at">total_years =</span> <span class="fu">sum</span>(age)) </span>
<span id="cb272-6"><a href="dplyr.html#cb272-6" tabindex="-1"></a><span class="co"># A tibble: 2 × 4</span></span>
<span id="cb272-7"><a href="dplyr.html#cb272-7" tabindex="-1"></a>  sex    avg_age oldest_age total_years</span>
<span id="cb272-8"><a href="dplyr.html#cb272-8" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>      <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb272-9"><a href="dplyr.html#cb272-9" tabindex="-1"></a><span class="dv">1</span> Female      <span class="dv">33</span>         <span class="dv">34</span>          <span class="dv">66</span></span>
<span id="cb272-10"><a href="dplyr.html#cb272-10" tabindex="-1"></a><span class="dv">2</span> Male        <span class="dv">34</span>         <span class="dv">35</span>          <span class="dv">68</span></span></code></pre></div>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="dplyr.html#cb273-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span></span>
<span id="cb273-2"><a href="dplyr.html#cb273-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb273-3"><a href="dplyr.html#cb273-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sample_size =</span> <span class="fu">n</span>())</span>
<span id="cb273-4"><a href="dplyr.html#cb273-4" tabindex="-1"></a><span class="co"># A tibble: 2 × 2</span></span>
<span id="cb273-5"><a href="dplyr.html#cb273-5" tabindex="-1"></a>  sex    sample_size</span>
<span id="cb273-6"><a href="dplyr.html#cb273-6" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>        <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb273-7"><a href="dplyr.html#cb273-7" tabindex="-1"></a><span class="dv">1</span> Female           <span class="dv">2</span></span>
<span id="cb273-8"><a href="dplyr.html#cb273-8" tabindex="-1"></a><span class="dv">2</span> Male             <span class="dv">2</span></span></code></pre></div>
<p>Note the use of the function, <strong><code>n()</code></strong>. This simple function counts up the number of records in each group.</p>
<p>```{r, include = FALSE</p>
<p>‘To illustrate these <code>dplyr</code> verbs and re-energize the room, ask everyone to stand. Tell the students that they represent a dataframe called <code>people</code>. Now, write a <code>dplyr</code> command into your R Console and ask them to act out the command. After each command, give them time to move around to act it out. If they move around too slowly, egg them on: “Come on, you all are like the slowest computer ever!” <br><br> <code>people %&gt;% arrange(shoe_size)</code> <br> <code>people %&gt;% arrange(shoe_size) %&gt;% filter(sex == "female")</code> <br> <code>people %&gt;% arrange(hair_length)</code> <br> <code>people %&gt;% arrange(desc(hair_length))</code> <br> <code>people %&gt;% group_by(sex) %&gt;% arrange(hair_length))</code> <br><code>people %&gt;% arrange(country_of_birth, shirt_color, desc(shoe_size))</code> <br><br> etc.’</p>
<pre><code>
#### Exercises {-}

Answer these questions using the new `dplyr` verbs you just learned:  

**Baby names over time**  

**1.** Run the below code to load a dataset about baby names given in the USA since the 1800&#39;s.  


``` r
library(dplyr)
library(babynames)
bn &lt;- babynames</code></pre>
<p><strong>2.</strong> Check out the first and last six rows of <code>bn</code>.</p>
<p><strong>3.</strong> What are the names of the variables in this dataset?</p>
<p><strong>4.</strong> How many rows are in this dataset?</p>
<p><strong>5.</strong> What is the earliest year in this dataset?</p>
<p><strong>6.</strong> Create a dataframe named <code>turn_of_century</code>, which contain data only for the year 1900.</p>
<p><strong>7.</strong> Create a dataframe named <code>boys</code>, containing only boys.</p>
<p><strong>8.</strong> Create a dataframe named <code>moms_gen</code>. This should be females born in the year of birth of your mom.</p>
<p><strong>9.</strong> Order <code>moms_gen</code> by <code>n</code>, in ascending order (i.e., with the least popular name at top). Look at the result; what is the least popular name among women the year your mom was born?</p>
<p><strong>10.</strong> Reverse the order and save the result into an object named <code>moms_gen_ordered</code>.</p>
<p><strong>11.</strong> Create an object named <code>boys2k</code>. This should be all males born in the year 2000.</p>
<p><strong>12.</strong> Arrange <code>boys2k</code> from most to least popular. What was the most popular boys name in 2000?</p>
<p><strong>13.</strong> What percentage of boys were named <code>Joseph</code> in 2000?</p>
<p><strong>14.</strong> Were there more Jims or Matthews in 2020?</p>
<p><strong>15.</strong> Create an object named <code>tot_names_by_year</code>, which contains the total counts for boy and girl names assigned in each year of the dataset. You should have four columns: <code>year</code>, <code>boys</code>, <code>girls</code>, and <code>tot</code>.</p>
<p><strong>16.</strong> How many people were born with <em>your</em> name in 2020?</p>
<p><strong>17.</strong> Was your name more prevalent in 2020 than it was in the year you were born?</p>
<p><strong>18.</strong> What if you account for the changing overall population size? In other words, is the <em>proportional prevalence</em> of your name greater in 2020 or your birth year?</p>
<p><strong>19.</strong> In which year was your name the most prevalent?</p>
<p><strong>20.</strong> Create a basic plot of the proportional prevalence of your name since the earliest year of this dataset.</p>
<p><strong>21.</strong> Update this plot with lines for your parent’s names and your siblings names, if you have any.</p>
<p><strong>22.</strong> Format that plot so that it is gorgeous and well-labelled.</p>
<p><strong>23.</strong> Screenshot it and email it to your family.</p>
<p>```{r, include = FALSE</p>
<p>‘After completing the exercises here, it is worthwhile devoting time to the Review modules entitled, <strong>“A <code>dplyr</code> mystery”</strong>, <strong>“A <code>dplyr</code> survey”</strong>, and <strong>“Global health and <code>ggplot</code>”</strong>. Once students become comfortable with working with <code>dplyr</code>, they will be ready to work independently on projects, using the modules in the <strong>Deep <code>R</code></strong> section for references.’</p>
<pre><code>
&lt;!--chapter:end:04d-dataframes2.Rmd--&gt;

# (PART) Review exercises {-}


#### Learning goals {-}

* This is a review exercise: apply the `dplyr` and `ggplot` skills introduced in the previous modules to explore the passenger manifest for the *RMS Titanic*.  

&amp;nbsp;  

```{r, include = FALSE

&#39;This review exercise is best done immediately after the module on **Dataframe wrangling**.&#39;</code></pre>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rms-titanic.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": null,
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["CongoFor1.5_Bootcamp.pdf", "CongoFor1.5_Bootcamp.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

</body>

</html>
